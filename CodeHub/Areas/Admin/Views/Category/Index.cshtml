@model IEnumerable<Category>
@{
	ViewData["Title"] = "Categories List";
}

<div class="page-body">
	<div class="container-fluid">
		<div class="page-title">
			<div class="row">
				<div class="col-6">
					<h3>Category List</h3>
				</div>
				<div class="col-6">
					<ol class="breadcrumb">
						<li class="breadcrumb-item">
							<a asp-controller="Dashboard" asp-action="Index">
								<svg class="stroke-icon">
									<use href="/assets/svg/icon-sprite.svg#stroke-home"></use>
								</svg>
							</a>
						</li>
						<li class="breadcrumb-item">Category</li>
						<li class="breadcrumb-item active">Category List</li>
					</ol>
				</div>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-12">
				<div class="card">
					<div class="card-header pb-0 card-no-border">
						<h3>List of categories</h3>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="display" id="basic-1">
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									@foreach (var category in Model)
									{
										<tr>
											<td>@category.Name</td>
											<td>@category.Description</td>
											<td>
												<ul class="action">
													<li class="edit" >
														<a asp-area="Admin" asp-controller="Category" asp-action="Upsert" asp-route-id="@category.Id">
															<i class="icon-pencil-alt"></i>
														</a>
													</li>
													<li class="delete" data-id="@category.Id"><a href="#"><i class="icon-trash"></i></a></li>
												</ul>
											</td>
										</tr>
									}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section Script {
	<!-- Plugins JS start-->
	<script src="~/assets/js/sidebar-menu.js"></script>
	<script src="~/assets/js/slick/slick.min.js"></script>
	<script src="~/assets/js/slick/slick.js"></script>
	<script src="~/assets/js/header-slick.js"></script>
	<script src="~/assets/js/datatable/datatables/jquery.dataTables.min.js"></script>
	<script src="~/assets/js/datatable/datatables/datatable.custom.js"></script>
	<script src="~/assets/js/sweet-alert/sweetalert.min.js"></script>
	<script src="~/assets/js/notify/bootstrap-notify.min.js"></script>
	<script src="~/assets/js/notify/notify-script.js"></script>
	<!-- Plugins JS Ends-->
	<!-- Theme js-->
	<script src="~/assets/js/script.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded',
			function () {
				const editButtons = document.querySelectorAll('.edit');
				const deleteButtons = document.querySelectorAll('.delete');
				deleteButtons.forEach(function (button) {
					button.addEventListener('click', function () {
						showAlert(button.dataset.id);
					});
				});
			});
		const showModal = (categoryId, categoryName, categoryDescription) => {
			const modal = document.getElementById("categoryModal");
			document.querySelector("#categoryId").value = categoryId;
			document.querySelector("#categoryName").value = categoryName;
			document.querySelector("#categoryDescription").value = categoryDescription;
			const bsModal = new bootstrap.Modal(modal);
			bsModal.show();
		};
		const showAlert = (categoryId) => {
			swal({
				title: "Are you sure?",
				text: "Once deleted, you will not be able to recover this category!",
				icon: "warning",
				buttons: true,
				dangerMode: true,
			})
				.then((willDelete) => {
					if (willDelete) {
						window.location.href = `/Admin/Category/Delete?id=${categoryId}`;
					}
				})
		}
		const showNotify = (msg) => {
			const content = {
				message: msg,
				target: "_blank",
				title: "Success"
			};
			$.notify(content,
				{
					type: "success",
					allow_dismiss: true,
					newest_on_top: true,
					mouse_over: true,
					showProgressbar: false,
					spacing: "13",
					timer: "2000",
					placement: {
						from: "top",
						align: "center"
					},
					offset: {
						x: "30",
						y: "30"
					},
					delay: "1000",
					z_index: "10000",
					animate: {
						enter: "animated bounce",
						exit: "animated bounce"
					}
				});
		}
	</script>
	@if (TempData["message"] != null)
	{
		<script>
		showNotify("@TempData["message"]");
		</script>
	}
}